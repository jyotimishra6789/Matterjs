<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catapult</title>
    <script src="matter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        body { margin: 0; overflow: hidden; }

        /* Step 2: Define the font-face */
        @font-face {
            font-family: 'AngryBirdsRegular';
            src: url('./angrybirds-regular.ttf') format('truetype'); /* Check if .ttf file is in the same folder as index.html */
            font-weight: normal;
            font-style: normal;
        }

        /* Step 3: Apply the custom font to desired elements */
        body {
            font-family: 'AngryBirdsRegular', Arial, sans-serif;
        }
    </style>
</head>
<body>

<script>
    // Module aliases
    var Engine = Matter.Engine,
        Render = Matter.Render,
        Runner = Matter.Runner,
        Composites = Matter.Composites,
        Constraint = Matter.Constraint,
        MouseConstraint = Matter.MouseConstraint,
        Mouse = Matter.Mouse,
        Composite = Matter.Composite,
        Bodies = Matter.Bodies,
        Body = Matter.Body,
        Vector = Matter.Vector;

    // Create engine
    var engine = Engine.create(),
        world = engine.world;

    // Create renderer with specific background color
    var render = Render.create({
    element: document.body,
    engine: engine,
    options: {
        width: 1000,   // Increased canvas width
        height: 700,   // Increased canvas height
        background: '#fafafa',
        showAngleIndicator: true,
        wireframes: false
    }
});


    Render.run(render);

    // Create runner
    var runner = Runner.create();
    Runner.run(runner, engine);

    // Collision group for constraints
    var group = Body.nextGroup(true);

    // Stack of boxes with images/textures if needed
    var stack = Composites.stack(250, 255, 1, 6, 0, 0, function(x, y) {
        return Bodies.rectangle(x, y, 30, 30, {
            render: {
                sprite: {
                    texture: './pig.png',
                    xScale: 0.1,
                    yScale: 0.1
                }
            }
        });
    });

    // Add static ground
    var ground = Bodies.rectangle(400, 600, 800, 50, { 
        isStatic: true, 
        render: { fillStyle: '#060a19' } 
    });

    // Add the catapult body with color
    var catapult = Bodies.rectangle(400, 520, 320, 20, { 
        collisionFilter: { group: group },
        render: { fillStyle: '#f69050' }
    });

    // Angry Bird body with image texture
    var angryBird = Bodies.rectangle(560, 100, 50, 50, {  
        density: 0.005,
        isStatic: false,
        render: {
            sprite: {
                texture: './angry-bird.png',
                xScale: 0.15,
                yScale: 0.15
            }
        }
    });

    // Add bodies to the world
    Composite.add(world, [
        stack,
        catapult,
        ground,
        Bodies.rectangle(250, 555, 20, 50, { 
            isStatic: true, 
            render: { fillStyle: '#060a19' } 
        }),
        Bodies.rectangle(400, 535, 20, 80, { 
            isStatic: true, 
            collisionFilter: { group: group }, 
            render: { fillStyle: '#060a19' } 
        }),
        angryBird,
        Constraint.create({ 
            bodyA: catapult, 
            pointB: Vector.clone(catapult.position),
            stiffness: 1,
            length: 0
        })
    ]);

    // Add mouse control
    var mouse = Mouse.create(render.canvas),
        mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: {
                    visible: false
                }
            }
        });

    Composite.add(world, mouseConstraint);
    render.mouse = mouse;

    // Fit the render viewport to the scene
    Render.lookAt(render, {
        min: { x: 0, y: 0 },
        max: { x: 800, y: 600 }
    });

    // Initialize opacity and size for each prize text
    let opacity1 = { value: 0, size: 24 };
    let opacity2 = { value: 0, size: 24 };
    let opacity3 = { value: 0, size: 24 };
    let opacity4 = { value: 0, size: 24 };
    let opacity5 = { value: 0, size: 24 };
    let opacity6 = { value: 0, size: 24 };

    // GSAP opacity animations with delays
    gsap.to(opacity2, { value: 1, duration: 1, delay: 2 });
    gsap.to(opacity4, { value: 1, duration: 1, delay: 2 }); // ₹1,00,000 appears first
    gsap.to(opacity1, { value: 1, duration: 1, delay: 3 });
    gsap.to(opacity5, { value: 1, duration: 1, delay: 3 });
    gsap.to(opacity3, { value: 1, duration: 1, delay: 4 }); // ₹50,000 appears second
    gsap.to(opacity6, { value: 1, duration: 1, delay: 4 }); 
    // ₹25,000 appears third

    // Increase the font size after opacity animation
    gsap.to(opacity2, { size: 68, duration: 1, delay: 2});
    gsap.to(opacity4, { size: 28, duration: 1, delay: 2}); // Increase size of ₹1,00,000
    gsap.to(opacity1, { size: 48, duration: 1, delay: 3});
    gsap.to(opacity5, { size: 24, duration: 1, delay: 3}); // Increase size of ₹50,000
    gsap.to(opacity3, { size: 48, duration: 1, delay:4}); 
    gsap.to(opacity6, { size: 28, duration: 1, delay:4}); // Increase size of ₹25,000

    // Custom rendering function to display text within the canvas
   // Custom rendering function to display text within the canvas
Matter.Events.on(render, "afterRender", function() {
    var ctx = render.context;

    // Adjust font size based on opacity's size property
    ctx.font = `bold ${opacity1.size}px AngryBirdsRegular`;

    // Draw each text with animated opacity and size
    ctx.fillStyle = `rgba(51, 51, 51, ${opacity1.value})`;
    ctx.fillText('₹50,000', 120, 300);
    ctx.font = `bold ${opacity5.size}px AngryBirdsRegular`;
    ctx.fillStyle = `rgba(51, 51, 51, ${opacity5.value})`;
    ctx.fillText('2nd Prize ', 160, 250);

    ctx.font = `bold ${opacity2.size}px AngryBirdsRegular`;
    ctx.fillStyle = `rgba(51, 51, 51, ${opacity2.value})`;
    ctx.fillText('₹1,00,000', 300, 400);  // ₹1,00,000 remains here

    // Position "1st Prize: ₹1,00,000" just above ₹1,00,000
    ctx.font = `bold ${opacity4.size}px AngryBirdsRegular`;
    ctx.fillStyle = `rgba(51, 51, 51, ${opacity4.value})`;
    ctx.fillText('1st Prize ', 410, 340);  // Adjusted y position to 380 for "1st Prize"
    
    ctx.font = `bold ${opacity3.size}px AngryBirdsRegular`;
    ctx.fillStyle = `rgba(51, 51, 51, ${opacity3.value})`;
    ctx.fillText('₹25,000', 600, 300);
    ctx.font = `bold ${opacity6.size}px AngryBirdsRegular`;
    ctx.fillStyle = `rgba(51, 51, 51, ${opacity6.value})`;
    ctx.fillText('3rd Prize ', 640, 250);
});

</script>

</body>
</html>
